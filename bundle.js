!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={categorical:["#bc5252","#519ec8","#9445a1","#54ab74","#c87337","#704242","#d3af1d"],sequential:["#e5e5e5","#e0c1be","#d79c98","#cb7774","#bc5252"]}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(t,n){function r(t,e){return!!(t?t.length:0)&&c(t,e,0)>-1}function o(t,e,n){for(var r=-1,o=t?t.length:0;++r<o;)if(n(e,t[r]))return!0;return!1}function i(t,e){for(var n=-1,r=t?t.length:0;++n<r;)if(e(t[n],n,t))return!0;return!1}function a(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function c(t,e,n){if(e!==e)return a(t,s,n);for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}function s(t){return t!==t}function u(t){return function(e){return null==e?void 0:e[t]}}function l(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function f(t,e){return t.has(e)}function d(t,e){return null==t?void 0:t[e]}function p(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function h(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function v(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function g(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function m(){this.__data__=Ye?Ye(null):{}}function y(t){return this.has(t)&&delete this.__data__[t]}function b(t){var e=this.__data__;if(Ye){var n=e[t];return n===$t?void 0:n}return Ce.call(e,t)?e[t]:void 0}function _(t){var e=this.__data__;return Ye?void 0!==e[t]:Ce.call(e,t)}function x(t,e){return this.__data__[t]=Ye&&void 0===e?$t:e,this}function w(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function E(){this.__data__=[]}function O(t){var e=this.__data__,n=D(e,t);return!(n<0)&&(n==e.length-1?e.pop():He.call(e,n,1),!0)}function A(t){var e=this.__data__,n=D(e,t);return n<0?void 0:e[n][1]}function k(t){return D(this.__data__,t)>-1}function j(t,e){var n=this.__data__,r=D(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}function I(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function M(){this.__data__={hash:new g,map:new($e||w),string:new g}}function T(t){return lt(this,t).delete(t)}function R(t){return lt(this,t).get(t)}function P(t){return lt(this,t).has(t)}function S(t,e){return lt(this,t).set(t,e),this}function C(t){var e=-1,n=t?t.length:0;for(this.__data__=new I;++e<n;)this.add(t[e])}function B(t){return this.__data__.set(t,$t),this}function L(t){return this.__data__.has(t)}function z(t){this.__data__=new w(t)}function F(){this.__data__=new w}function W(t){return this.__data__.delete(t)}function H(t){return this.__data__.get(t)}function N(t){return this.__data__.has(t)}function q(t,e){var n=this.__data__;if(n instanceof w){var r=n.__data__;if(!$e||r.length<Nt-1)return r.push([t,e]),this;n=this.__data__=new I(r)}return n.set(t,e),this}function $(t,e){var n=an(t)||kt(t)?l(t.length,String):[],r=n.length,o=!!r;for(var i in t)!e&&!Ce.call(t,i)||o&&("length"==i||ht(i,r))||n.push(i);return n}function D(t,e){for(var n=t.length;n--;)if(At(t[n][0],e))return n;return-1}function U(t,e){e=vt(e,t)?[e]:at(e);for(var n=0,r=e.length;null!=t&&n<r;)t=t[xt(e[n++])];return n&&n==r?t:void 0}function V(t){return Be.call(t)}function Y(t,e){return null!=t&&e in Object(t)}function G(t,e,n,r,o){return t===e||(null==t||null==e||!Rt(t)&&!Pt(e)?t!==t&&e!==e:Q(t,e,G,n,r,o))}function Q(t,e,n,r,o,i){var a=an(t),c=an(e),s=Qt,u=Qt;a||(s=rn(t),s=s==Gt?re:s),c||(u=rn(e),u=u==Gt?re:u);var l=s==re&&!p(t),f=u==re&&!p(e),d=s==u;if(d&&!l)return i||(i=new z),a||cn(t)?ct(t,e,n,r,o,i):st(t,e,s,n,r,o,i);if(!(o&Ut)){var h=l&&Ce.call(t,"__wrapped__"),v=f&&Ce.call(e,"__wrapped__");if(h||v){var g=h?t.value():t,m=v?e.value():e;return i||(i=new z),n(g,m,r,o,i)}}return!!d&&(i||(i=new z),ut(t,e,n,r,o,i))}function J(t,e,n,r){var o=n.length,i=o,a=!r;if(null==t)return!i;for(t=Object(t);o--;){var c=n[o];if(a&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<i;){c=n[o];var s=c[0],u=t[s],l=c[1];if(a&&c[2]){if(void 0===u&&!(s in t))return!1}else{var f=new z;if(r)var d=r(u,l,s,t,e,f);if(!(void 0===d?G(l,u,r,Dt|Ut,f):d))return!1}}return!0}function K(t){return!(!Rt(t)||mt(t))&&(Mt(t)||p(t)?Le:ge).test(wt(t))}function X(t){return Pt(t)&&Tt(t.length)&&!!ye[Be.call(t)]}function Z(t){return"function"==typeof t?t:null==t?Ft:"object"==typeof t?an(t)?nt(t[0],t[1]):et(t):Ht(t)}function tt(t){if(!yt(t))return Ne(t);var e=[];for(var n in Object(t))Ce.call(t,n)&&"constructor"!=n&&e.push(n);return e}function et(t){var e=ft(t);return 1==e.length&&e[0][2]?_t(e[0][0],e[0][1]):function(n){return n===t||J(n,t,e)}}function nt(t,e){return vt(t)&&bt(e)?_t(xt(t),e):function(n){var r=Bt(n,t);return void 0===r&&r===e?Lt(n,t):G(e,r,void 0,Dt|Ut)}}function rt(t){return function(e){return U(e,t)}}function ot(t){if("string"==typeof t)return t;if(St(t))return en?en.call(t):"";var e=t+"";return"0"==e&&1/t==-Vt?"-0":e}function it(t,e,n){var i=-1,a=r,c=t.length,s=!0,u=[],l=u;if(n)s=!1,a=o;else if(c>=Nt){var d=e?null:nn(t);if(d)return v(d);s=!1,a=f,l=new C}else l=e?[]:u;t:for(;++i<c;){var p=t[i],h=e?e(p):p;if(p=n||0!==p?p:0,s&&h===h){for(var g=l.length;g--;)if(l[g]===h)continue t;e&&l.push(h),u.push(p)}else a(l,h,n)||(l!==u&&l.push(h),u.push(p))}return u}function at(t){return an(t)?t:on(t)}function ct(t,e,n,r,o,a){var c=o&Ut,s=t.length,u=e.length;if(s!=u&&!(c&&u>s))return!1;var l=a.get(t);if(l&&a.get(e))return l==e;var f=-1,d=!0,p=o&Dt?new C:void 0;for(a.set(t,e),a.set(e,t);++f<s;){var h=t[f],v=e[f];if(r)var g=c?r(v,h,f,e,t,a):r(h,v,f,t,e,a);if(void 0!==g){if(g)continue;d=!1;break}if(p){if(!i(e,function(t,e){if(!p.has(e)&&(h===t||n(h,t,r,o,a)))return p.add(e)})){d=!1;break}}else if(h!==v&&!n(h,v,r,o,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function st(t,e,n,r,o,i,a){switch(n){case ue:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case se:return!(t.byteLength!=e.byteLength||!r(new Fe(t),new Fe(e)));case Jt:case Kt:case ne:return At(+t,+e);case Xt:return t.name==e.name&&t.message==e.message;case oe:case ae:return t==e+"";case ee:var c=h;case ie:var s=i&Ut;if(c||(c=v),t.size!=e.size&&!s)return!1;var u=a.get(t);if(u)return u==e;i|=Dt,a.set(t,e);var l=ct(c(t),c(e),r,o,i,a);return a.delete(t),l;case ce:if(tn)return tn.call(t)==tn.call(e)}return!1}function ut(t,e,n,r,o,i){var a=o&Ut,c=zt(t),s=c.length;if(s!=zt(e).length&&!a)return!1;for(var u=s;u--;){var l=c[u];if(!(a?l in e:Ce.call(e,l)))return!1}var f=i.get(t);if(f&&i.get(e))return f==e;var d=!0;i.set(t,e),i.set(e,t);for(var p=a;++u<s;){l=c[u];var h=t[l],v=e[l];if(r)var g=a?r(v,h,l,e,t,i):r(h,v,l,t,e,i);if(!(void 0===g?h===v||n(h,v,r,o,i):g)){d=!1;break}p||(p="constructor"==l)}if(d&&!p){var m=t.constructor,y=e.constructor;m!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y)&&(d=!1)}return i.delete(t),i.delete(e),d}function lt(t,e){var n=t.__data__;return gt(e)?n["string"==typeof e?"string":"hash"]:n.map}function ft(t){for(var e=zt(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,bt(o)]}return e}function dt(t,e){var n=d(t,e);return K(n)?n:void 0}function pt(t,e,n){e=vt(e,t)?[e]:at(e);for(var r,o=-1,i=e.length;++o<i;){var a=xt(e[o]);if(!(r=null!=t&&n(t,a)))break;t=t[a]}if(r)return r;var i=t?t.length:0;return!!i&&Tt(i)&&ht(a,i)&&(an(t)||kt(t))}function ht(t,e){return!!(e=null==e?Yt:e)&&("number"==typeof t||me.test(t))&&t>-1&&t%1==0&&t<e}function vt(t,e){if(an(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!St(t))||(fe.test(t)||!le.test(t)||null!=e&&t in Object(e))}function gt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function mt(t){return!!Pe&&Pe in t}function yt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Te)}function bt(t){return t===t&&!Rt(t)}function _t(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function xt(t){if("string"==typeof t||St(t))return t;var e=t+"";return"0"==e&&1/t==-Vt?"-0":e}function wt(t){if(null!=t){try{return Se.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Et(t,e){return t&&t.length?it(t,Z(e,2)):[]}function Ot(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(qt);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a),a};return n.cache=new(Ot.Cache||I),n}function At(t,e){return t===e||t!==t&&e!==e}function kt(t){return It(t)&&Ce.call(t,"callee")&&(!We.call(t,"callee")||Be.call(t)==Gt)}function jt(t){return null!=t&&Tt(t.length)&&!Mt(t)}function It(t){return Pt(t)&&jt(t)}function Mt(t){var e=Rt(t)?Be.call(t):"";return e==Zt||e==te}function Tt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Yt}function Rt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Pt(t){return!!t&&"object"==typeof t}function St(t){return"symbol"==typeof t||Pt(t)&&Be.call(t)==ce}function Ct(t){return null==t?"":ot(t)}function Bt(t,e,n){var r=null==t?void 0:U(t,e);return void 0===r?n:r}function Lt(t,e){return null!=t&&pt(t,e,Y)}function zt(t){return jt(t)?$(t):tt(t)}function Ft(t){return t}function Wt(){}function Ht(t){return vt(t)?u(xt(t)):rt(t)}var Nt=200,qt="Expected a function",$t="__lodash_hash_undefined__",Dt=1,Ut=2,Vt=1/0,Yt=9007199254740991,Gt="[object Arguments]",Qt="[object Array]",Jt="[object Boolean]",Kt="[object Date]",Xt="[object Error]",Zt="[object Function]",te="[object GeneratorFunction]",ee="[object Map]",ne="[object Number]",re="[object Object]",oe="[object RegExp]",ie="[object Set]",ae="[object String]",ce="[object Symbol]",se="[object ArrayBuffer]",ue="[object DataView]",le=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,fe=/^\w*$/,de=/^\./,pe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,he=/[\\^$.*+?()[\]{}|]/g,ve=/\\(\\)?/g,ge=/^\[object .+?Constructor\]$/,me=/^(?:0|[1-9]\d*)$/,ye={};ye["[object Float32Array]"]=ye["[object Float64Array]"]=ye["[object Int8Array]"]=ye["[object Int16Array]"]=ye["[object Int32Array]"]=ye["[object Uint8Array]"]=ye["[object Uint8ClampedArray]"]=ye["[object Uint16Array]"]=ye["[object Uint32Array]"]=!0,ye[Gt]=ye[Qt]=ye[se]=ye[Jt]=ye[ue]=ye[Kt]=ye[Xt]=ye[Zt]=ye[ee]=ye[ne]=ye[re]=ye[oe]=ye[ie]=ye[ae]=ye["[object WeakMap]"]=!1;var be="object"==typeof t&&t&&t.Object===Object&&t,_e="object"==typeof self&&self&&self.Object===Object&&self,xe=be||_e||Function("return this")(),we="object"==typeof e&&e&&!e.nodeType&&e,Ee=we&&"object"==typeof n&&n&&!n.nodeType&&n,Oe=Ee&&Ee.exports===we,Ae=Oe&&be.process,ke=function(){try{return Ae&&Ae.binding("util")}catch(t){}}(),je=ke&&ke.isTypedArray,Ie=Array.prototype,Me=Function.prototype,Te=Object.prototype,Re=xe["__core-js_shared__"],Pe=function(){var t=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Se=Me.toString,Ce=Te.hasOwnProperty,Be=Te.toString,Le=RegExp("^"+Se.call(Ce).replace(he,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ze=xe.Symbol,Fe=xe.Uint8Array,We=Te.propertyIsEnumerable,He=Ie.splice,Ne=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),qe=dt(xe,"DataView"),$e=dt(xe,"Map"),De=dt(xe,"Promise"),Ue=dt(xe,"Set"),Ve=dt(xe,"WeakMap"),Ye=dt(Object,"create"),Ge=wt(qe),Qe=wt($e),Je=wt(De),Ke=wt(Ue),Xe=wt(Ve),Ze=ze?ze.prototype:void 0,tn=Ze?Ze.valueOf:void 0,en=Ze?Ze.toString:void 0;g.prototype.clear=m,g.prototype.delete=y,g.prototype.get=b,g.prototype.has=_,g.prototype.set=x,w.prototype.clear=E,w.prototype.delete=O,w.prototype.get=A,w.prototype.has=k,w.prototype.set=j,I.prototype.clear=M,I.prototype.delete=T,I.prototype.get=R,I.prototype.has=P,I.prototype.set=S,C.prototype.add=C.prototype.push=B,C.prototype.has=L,z.prototype.clear=F,z.prototype.delete=W,z.prototype.get=H,z.prototype.has=N,z.prototype.set=q;var nn=Ue&&1/v(new Ue([,-0]))[1]==Vt?function(t){return new Ue(t)}:Wt,rn=V;(qe&&rn(new qe(new ArrayBuffer(1)))!=ue||$e&&rn(new $e)!=ee||De&&"[object Promise]"!=rn(De.resolve())||Ue&&rn(new Ue)!=ie||Ve&&"[object WeakMap]"!=rn(new Ve))&&(rn=function(t){var e=Be.call(t),n=e==re?t.constructor:void 0,r=n?wt(n):void 0;if(r)switch(r){case Ge:return ue;case Qe:return ee;case Je:return"[object Promise]";case Ke:return ie;case Xe:return"[object WeakMap]"}return e});var on=Ot(function(t){t=Ct(t);var e=[];return de.test(t)&&e.push(""),t.replace(pe,function(t,n,r,o){e.push(r?o.replace(ve,"$1"):n||t)}),e});Ot.Cache=I;var an=Array.isArray,cn=je?function(t){return function(e){return t(e)}}(je):X;n.exports=Et}).call(e,n(1),n(9)(t))},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(){d3.max(m,function(t){return t.value});M.select("svg").remove();var t=M.append("g.g-key"),e=[1,11,21,41,61];j=20*e.length,t.selectAll("rect").data(e).enter().append("rect").at("width",20).at("height",20).at("x",function(t,e){return 20*e}).at("y",0).style("fill",function(t,e){return v.default.sequential[e]}),t.append("text.first").at("x",-_).at("y",20-_/2).style("text-anchor","end").style("text-transform","uppercase").text("Less Interest"+(P?"":" in State of the Union")),t.append("text.second").at("x",j+_).at("y",20-_/2).style("text-anchor","start").style("text-transform","uppercase").text("More interest")}function i(){var t=m.map(function(t){return t.value});I.domain(t),R=T.selectAll(".state").data(g,function(t){return t.code});var e=R.enter().append("g").at("class",function(t){return"state state--"+t.code});e.append("rect").at({x:0,y:0}),e.append("text").text(function(t){return t.code}).at("text-anchor","middle").at("dy",_/3),R=e.merge(R)}function a(){R.at("transform",function(t){return"translate("+t.x*k+", "+t.y*k+")"}).at({width:k,height:k}),R.select("rect").at({width:k,height:k}),R.select("text").at("x",k/2).at("y",k/2);var t=M.select(".g-key"),e=t.select(".second").node().getBoundingClientRect().width,n=t.node().getBoundingClientRect().width/2,r=A/2-(e+j+_)+n;t.at("transform","translate("+r+", "+(8*k+3*_)+")")}function c(t,e,n,r){var o=t-2,i=e-2,a=Math.floor(o/n),c=Math.floor(i/r);return a<=c?a:c}function s(){var t=y.node().offsetWidth;P=d3.select(".scroll").node().offsetWidth<S,A=t-E.right-E.left,O=y.node().offsetHeight-E.top-E.bottom,k=c(A,O-5*_,12,8)}function u(){s(),M.at("width",A+E.left+E.right).at("height",O+E.top+E.bottom),T.at("transform","translate("+E.left+", "+E.top+")"),R&&a()}function l(t){var e=m.filter(function(e){return e.minute===t});R&&t<=80&&R.select("rect").transition().duration(w).ease(x).st("fill",function(t){var n=e.find(function(e){return e.code===t.code});return n?I(n.value):"#ddd"})}function f(t){var e=new Date(t[0].timestamp.split(" ")[1]);return t.map(function(t){var n=t.timestamp.split(" "),r=n[0].split("-")[1],o=n[1],i=new Date(o),a=i-e,c=Math.floor(a/6e4);return p({},t,{code:r,minute:c,value:+t.value})})}function d(){var t,e=["grid","minutes"].map(function(t){return"assets/data/map-"+t+".csv"});(t=d3).loadData.apply(t,r(e).concat([function(t,e){g=e[0].map(function(t){return p({},t,{code:t.code.toLowerCase(),x:+t.x-2,y:+t.y-1})}),m=f(e[1]),i(),o(),u()}]))}Object.defineProperty(e,"__esModule",{value:!0});var p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h=n(0),v=function(t){return t&&t.__esModule?t:{default:t}}(h),g=[],m=[],y=d3.select(".graphic__map"),b=y.select(".chart"),_=12,x=d3.easeCubicOut,w=1e3,E={top:12,right:12,bottom:12,left:12},O=0,A=0,k=0,j=0,I=d3.scaleQuantile().range(v.default.sequential),M=b.select("svg"),T=M.append("g"),R=null,P=!1,S=800;e.default={init:d,resize:u,update:l}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){var t=p.node().offsetWidth;h!==t&&(h=t,l.default.resize(),d.default.resize())}var i=n(5),a=r(i),c=n(6),s=r(c),u=n(7),l=r(u),f=n(3),d=r(f),p=d3.select("body"),h=0;!function(){p.classed("is-mobile",s.default.any()),window.addEventListener("resize",(0,a.default)(o,150)),l.default.init()}()},function(t,e,n){(function(e){function n(t,e,n){function o(e){var n=v,r=g;return v=g=void 0,O=e,y=t.apply(r,n)}function i(t){return O=t,b=setTimeout(l,e),A?o(t):y}function s(t){var n=t-E,r=t-O,o=e-n;return k?x(o,m-r):o}function u(t){var n=t-E,r=t-O;return void 0===E||n>=e||n<0||k&&r>=m}function l(){var t=w();if(u(t))return f(t);b=setTimeout(l,s(t))}function f(t){return b=void 0,j&&v?o(t):(v=g=void 0,y)}function d(){void 0!==b&&clearTimeout(b),O=0,v=E=g=b=void 0}function p(){return void 0===b?y:f(w())}function h(){var t=w(),n=u(t);if(v=arguments,g=this,E=t,n){if(void 0===b)return i(E);if(k)return b=setTimeout(l,e),o(E)}return void 0===b&&(b=setTimeout(l,e)),y}var v,g,m,y,b,E,O=0,A=!1,k=!1,j=!0;if("function"!=typeof t)throw new TypeError(c);return e=a(e)||0,r(n)&&(A=!!n.leading,k="maxWait"in n,m=k?_(a(n.maxWait)||0,e):m,j="trailing"in n?!!n.trailing:j),h.cancel=d,h.flush=p,h}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function o(t){return!!t&&"object"==typeof t}function i(t){return"symbol"==typeof t||o(t)&&b.call(t)==u}function a(t){if("number"==typeof t)return t;if(i(t))return s;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(l,"");var n=d.test(t);return n||p.test(t)?h(t.slice(2),n?2:8):f.test(t)?s:+t}var c="Expected a function",s=NaN,u="[object Symbol]",l=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,p=/^0o[0-7]+$/i,h=parseInt,v="object"==typeof e&&e&&e.Object===Object&&e,g="object"==typeof self&&self&&self.Object===Object&&self,m=v||g||Function("return this")(),y=Object.prototype,b=y.toString,_=Math.max,x=Math.min,w=function(){return m.Date.now()};t.exports=n}).call(e,n(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()}};e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(){var t=q.node().offsetWidth;at=t<tt;var e=at?0:V.node().offsetWidth;ot=t-e;var n=window.innerHeight;it=at?Math.floor(.67*n):n,$.st({width:ot+e,height:it}),D.st({width:ot}),Y.st({width:at?"100%":ot}),K.st({width:ot}),X.st({width:at?ot:e}),Z.st("right",(e-nt)/2)}function c(){a(),N.resize(),L.default.resize(),F.default.resize(),H.default.resize()}function s(t){var e=t.minute,n=t.marks;F.default.update({minute:e,marks:n}),H.default.update(e);var r=1===e?"":"s",o=e+" minute"+r;J.select(".minute").text(o)}function u(t){var e=t.element,n=(t.direction,t.index,d3.select(e));n.classed("is-active",!0);var r=+n.at("data-time"),o=[];n.selectAll("mark").each(function(t,e,n){return o.push(d3.select(n[e]).at("data-id"))}),s({minute:r,marks:o})}function l(t){var e=t.element;t.direction,t.index;d3.select(e).classed("is-active",!1)}function f(t){t.direction;$.classed("is-sticky",!0)}function d(t){var e=t.direction;$.classed("is-sticky",!1),$.classed("is-bottom","down"===e)}function p(){N.setup({step:".transcript .step",offset:at?.9:.5,debug:!1,container:".scroll",graphic:".scroll__graphic"}).onStepEnter(u).onStepExit(l).onContainerEnter(f).onContainerExit(d)}function h(t){return function(){var e=window.pageYOffset||document.documentElement.scrollTop,n=d3.interpolateNumber(e,e+t);return function(t){return window.scrollTo(0,n(t))}}}function v(){st||(st=!0,d3.transition().duration(et).ease(rt).tween("scroll",h(.33*window.innerHeight)).on("end",function(){st=!1,ct?setTimeout(v,et):Q.select("span").text("(off)")}))}function g(){(ct=!ct)&&v();var t=ct?"(on)":"(off)";Q.select("span").text(t);var e=ct?1:0;Q.selectAll(".autoplay__btn").classed("is-visible",function(t,n){return n===e})}function m(){Q.on("click",g)}function y(t,e){K.selectAll("button").classed("is-selected",function(t,n){return n===e}),U.classed("is-visible",function(t,n){return n===e}),J.select(".title").text(0===e?"Trending Topics":"State of the Union")}function b(t,e){X.selectAll("button").classed("is-selected",function(t,n){return n===e}),V.selectAll(".step").classed("is-highlight",1===e),N.resize()}function _(){K.selectAll("button").on("click",y),X.selectAll("button").on("click",b),N.resize()}function x(t){var e={};return t.map(function(t){return I({},t,i({},[ut],+t[ut]))}).forEach(function(t){return e[t.id]=t}),e}function w(t){var e=t.data,n=t.dict,r=e.columns,i=r.slice(1),a=[],c=e[0];return e.forEach(function(t,e){var r=t.timestamp.replace("us ",""),s=e,u=i.map(function(e){var o=+t[e],i=(n[e][ut],+c[e]);return{id:e,timestamp:r,minute:s,raw:o,change:o-i,percent:(o-i)/i}});a.push.apply(a,o(u))}),a.filter(function(t){return t.timestamp})}function E(t){var e=x(t[0]),n=w({data:t[1],dict:e}),r=d3.nest().key(function(t){return t.id}).entries(n).map(function(t){var n;return I({},t,(n={},i(n,[ut],e[t.key][ut]),i(n,"display",e[t.key].term),i(n,"category",e[t.key].category),i(n,"sum",d3.sum(t.values,function(t){return t.raw})),n))});return r.sort(function(t,e){return d3.ascending(t[ut],e[ut])}),{search:n,nested:r,dict:e}}function O(t){var e=new Date(2018,0,30,21,+t+11);return d3.timeFormat("%I:%M")(e)}function A(){var t=0;V.selectAll(".step").each(function(e,n,r){var o=d3.select(r[n]),i=o.select("p span");i.size()&&(t=i.at("data-time")),o.at("data-time",t),o.selectAll("time").text("("+O(t)+") ")})}function k(t){var e=Object.keys(t).map(function(e){return t[e].category}),n=(0,C.default)(e);V.selectAll("mark").each(function(e,r,o){var i=d3.select(o[r]),a=i.at("data-id"),c=t[a],s=c?n.indexOf(c.category):-1;if(s>-1){var u=P.default.categorical[s],l=d3.color(u);l.opacity=.33;var f=d3.color(u);f.darker(),i.st("background-color",l).st("color",f)}})}function j(){var t;a();var e=["dict","search"].map(function(t){return"assets/data/speech-"+t+".csv"});L.default.init(),F.default.init(),H.default.init(),(t=d3).loadData.apply(t,o(e).concat([function(t,e){if(t)throw t;var n=E(e);k(n.dict),L.default.setup(n),F.default.setup(n),c()}])),A(),p(),m(),_()}Object.defineProperty(e,"__esModule",{value:!0});var I=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},M=n(8),T=r(M),R=n(0),P=r(R),S=n(2),C=r(S),B=n(10),L=r(B),z=n(11),F=r(z),W=n(3),H=r(W),N=(0,T.default)(),q=d3.select(".scroll"),$=q.select(".scroll__graphic"),D=$.select(".graphic__container"),U=$.selectAll(".graphic"),V=q.select(".scroll__text"),Y=$.select(".header__time"),G=Y.select(".time__ui"),Q=G.selectAll(".ui__autoplay"),J=Y.select(".time__display"),K=$.select(".menu__graphic"),X=$.select(".menu__transcript"),Z=$.select(".trump-image"),tt=800,et=1e3,nt=192,rt=d3.easeCubicInOut,ot=0,it=0,at=!1,ct=!1,st=!1,ut="index_past_week";e.default={init:j,resize:c}},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t){for(var e=t.length,n=[],r=0;r<e;r+=1)n.push(t[r]);return n}function e(t){return t instanceof Element?t:"string"==typeof t?document.querySelector(t):null}function n(e,n){return void 0===n&&(n=document),"string"==typeof e?t(n.querySelectorAll(e)):e instanceof NodeList?t(e):e instanceof Array?e:[]}function r(){function t(t){var e=0;if(t.offsetParent)do{e+=t.offsetTop,t=t.offsetParent}while(t);return e<0?0:e}function r(){var t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)}function o(t){return+t.getAttribute("data-scrollama-index")}function i(){window.pageYOffset>et?nt="down":window.pageYOffset<et&&(nt="up"),et=window.pageYOffset}function a(){if(q=window.innerHeight,$=r(),V=F?F.getBoundingClientRect():null,N=H*q,D=W?W.map(function(t){return t.offsetHeight}):[],U=W?W.map(t):[],G&&Y&&M(),Q){document.querySelector("#scrollama__debug--offset-"+S).style.top=N+"px"}}function c(t){t&&!G?(Y&&M(),G=!0):t||(L.top&&L.top.disconnect(),L.bottom&&L.bottom.disconnect(),L.stepAbove&&L.stepAbove.forEach(function(t){return t.disconnect()}),L.stepBelow&&L.stepBelow.forEach(function(t){return t.disconnect()}),L.stepProgress&&L.stepProgress.forEach(function(t){return t.disconnect()}),L.viewportAbove&&L.viewportAbove.forEach(function(t){return t.disconnect()}),L.viewportBelow&&L.viewportBelow.forEach(function(t){return t.disconnect()}),G=!1)}function s(t){for(var e=Math.ceil(t/K),n=[],r=1/e,o=0;o<e;o++)n.push(o*r);return n}function u(t,e){if("above"===e)for(var n=0;n<t;n++){var r=Z[n];"enter"===r.state&&f(W[n],"down"),"up"===r.direction&&(l(W[n],"down",!1),f(W[n],"down"))}else if("below"===e)for(var o=Z.length-1;o>t;o--){var i=Z[o];"enter"===i.state&&f(W[o],"up"),"down"===i.direction&&(l(W[o],"up",!1),f(W[o],"up"))}}function l(t,e){void 0===e&&(e=!0);var n=o(t),r={element:t,index:n,direction:nt};Z[n].direction=nt,Z[n].state="enter",X&&e&&"down"===nt&&u(n,"above"),X&&e&&"up"===nt&&u(n,"below"),B.stepEnter&&"function"==typeof B.stepEnter&&B.stepEnter(r,Z),J&&("down"===nt?d(t,0):d(t,1))}function f(t){var e=o(t),n={element:t,index:e,direction:nt};Z[e].direction=nt,Z[e].state="exit",J&&("down"===nt?d(t,1):d(t,0)),B.stepExit&&"function"==typeof B.stepExit&&B.stepExit(n,Z)}function d(t,e){var n=o(t),r={element:t,index:n,progress:e};B.stepProgress&&"function"==typeof B.stepProgress&&B.stepProgress(r)}function p(){var t={direction:nt};tt.direction=nt,tt.state="enter",B.containerEnter&&"function"==typeof B.containerEnter&&B.containerEnter(t)}function h(){var t={direction:nt};tt.direction=nt,tt.state="exit",B.containerExit&&"function"==typeof B.containerExit&&B.containerExit(t)}function v(t){i(),t.forEach(function(t){var e=t.isIntersecting,n=t.boundingClientRect,r=t.target,i=n.bottom,a=n.height,c=i-N,s=o(r),u=Z[s];c>=-C&&(e&&"down"===nt&&"enter"!==u.state?l(r,nt):e||"up"!==nt||"enter"!==u.state?!e&&c>=a&&"down"===nt&&"enter"===u.state&&f(r,nt):f(r,nt))})}function g(t){i(),t.forEach(function(t){var e=t.isIntersecting,n=t.boundingClientRect,r=t.target,i=n.bottom,a=n.height,c=i-N,s=o(r),u=Z[s];c>=-C&&c<a&&e&&"up"===nt&&"enter"!==u.state?l(r,nt):c<=C&&!e&&"down"===nt&&"enter"===u.state&&f(r,nt)})}function m(t){i(),t.forEach(function(t){var e=t.isIntersecting,n=t.target,r=o(n),i=Z[r];e&&"down"===nt&&"enter"!==i.state&&"down"!==i.direction&&(l(n,"down"),f(n,"down"))})}function y(t){i(),t.forEach(function(t){var e=t.isIntersecting,n=t.target,r=o(n),i=Z[r];e&&"up"===nt&&"enter"!==i.state&&"up"!==i.direction&&(l(n,"up"),f(n,"up"))})}function b(t){i(),t.forEach(function(t){var e=t.isIntersecting,n=t.intersectionRatio,r=t.boundingClientRect,o=t.target,i=r.bottom,a=i-N;e&&a>=-C&&d(o,+n.toFixed(3))})}function _(t){i();var e=t[0],n=e.isIntersecting,r=e.boundingClientRect;r.top;r.bottom>-C&&(n?p(nt):"enter"===tt.state&&h(nt))}function x(t){i();var e=t[0],n=e.isIntersecting;e.boundingClientRect.top<C&&(n?p(nt):"enter"===tt.state&&h(nt))}function w(){L.top&&L.top.unobserve(z);var t={root:null,rootMargin:q+"px 0px -"+q+"px 0px",threshold:0};L.top=new IntersectionObserver(_,t),L.top.observe(z)}function E(){L.bottom&&L.bottom.unobserve(z);var t={root:null,rootMargin:"-"+V.height+"px 0px "+V.height+"px 0px",threshold:0};L.bottom=new IntersectionObserver(x,t),L.bottom.observe(z)}function O(){L.stepAbove&&L.stepAbove.forEach(function(t){return t.disconnect()}),L.stepAbove=W.map(function(t,e){var n=D[e],r=-q+N,o=n+"px 0px "+r+"px 0px",i={root:null,rootMargin:o,threshold:0},a=new IntersectionObserver(v,i);return a.observe(t),a})}function A(){L.stepBelow&&L.stepBelow.forEach(function(t){return t.disconnect()}),L.stepBelow=W.map(function(t,e){var n=-N,r=$-q+D[e]+N,o=n+"px 0px "+r+"px 0px",i={root:null,rootMargin:o,threshold:0},a=new IntersectionObserver(g,i);return a.observe(t),a})}function k(){L.viewportAbove&&L.viewportAbove.forEach(function(t){return t.disconnect()}),L.viewportAbove=W.map(function(t,e){var n=U[e],r=-(q-N+D[e]),o=n+"px 0px "+r+"px 0px",i={root:null,rootMargin:o,threshold:0},a=new IntersectionObserver(m,i);return a.observe(t),a})}function j(){L.viewportBelow&&L.viewportBelow.forEach(function(t){return t.disconnect()}),L.viewportBelow=W.map(function(t,e){var n=-(N+D[e]),r=$-U[e]-D[e]-N,o=n+"px 0px "+r+"px 0px",i={root:null,rootMargin:o,threshold:0},a=new IntersectionObserver(y,i);return a.observe(t),a})}function I(){L.stepProgress&&L.stepProgress.forEach(function(t){return t.disconnect()}),L.stepProgress=W.map(function(t,e){var n=D[e]-N,r=-q+N,o=n+"px 0px "+r+"px 0px",i=s(D[e]),a={root:null,rootMargin:o,threshold:i},c=new IntersectionObserver(b,a);return c.observe(t),c})}function M(){k(),j(),O(),A(),J&&I(),z&&F&&(w(),E())}function T(){W.forEach(function(t,e){return t.setAttribute("data-scrollama-index",e)})}function R(){Z=W.map(function(){return{direction:null,state:null}}),tt={direction:null,state:null}}function P(){if(Q){var t=document.createElement("div");t.setAttribute("id","scrollama__debug--offset-"+S),t.setAttribute("class","scrollama__debug--offset"),t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="1px",t.style.borderBottom="1px dashed red";var e=document.createElement("p"),n=W[0].getAttribute("class");e.innerText='".'+n+'" trigger: '+H,e.style.fontSize="12px",e.style.fontFamily="monospace",e.style.color="red",e.style.margin="0",e.style.padding="6px",t.appendChild(e),document.body.appendChild(t)}}var S=Math.floor(1e5*Math.random()),C=1,B={},L={},z=null,F=null,W=null,H=0,N=0,q=0,$=0,D=null,U=null,V=null,Y=!1,G=!1,Q=!1,J=!1,K=0,X=!1,Z=null,tt=null,et=-1,nt=null,rt={};return rt.setup=function(t){var r=t.container,o=t.graphic,i=t.step,s=t.offset;void 0===s&&(s=.5);var u=t.progress;void 0===u&&(u=!1);var l=t.threshold;void 0===l&&(l=4);var f=t.debug;void 0===f&&(f=!1);var d=t.order;return void 0===d&&(d=!0),W=n(i),z=r?e(r):null,F=o?e(o):null,W.length?(Q=f,J=u,X=d,rt.offsetTrigger(s),K=Math.max(1,+l),Y=!0,P(),T(),R(),a(),c(!0),rt):(console.error("scrollama error: no step elements"),rt)},rt.resize=function(){return a(),rt},rt.enable=function(){return c(!0),rt},rt.disable=function(){return c(!1),rt},rt.destroy=function(){c(!1),Object.keys(B).forEach(function(t){return B[t]=null}),Object.keys(L).forEach(function(t){return L[t]=null})},rt.offsetTrigger=function(t){return t&&(isNaN(t),!0)?(H=Math.min(Math.max(0,t),1),rt):H},rt.onStepEnter=function(t){return B.stepEnter=t,rt},rt.onStepExit=function(t){return B.stepExit=t,rt},rt.onStepProgress=function(t){return B.stepProgress=t,rt},rt.onContainerEnter=function(t){return B.containerEnter=t,rt},rt.onContainerExit=function(t){return B.containerExit=t,rt},rt}return function(t,e){function n(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||l(),this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,r=this.intersectionRect,o=r.width*r.height;this.intersectionRatio=n?o/n:this.isIntersecting?1:0}function r(t,e){var n=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=i(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" ")}function o(){return t.performance&&performance.now&&performance.now()}function i(t,e){var n=null;return function(){n||(n=setTimeout(function(){t(),n=null},e))}}function a(t,e,n,r){"function"==typeof t.addEventListener?t.addEventListener(e,n,r||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function c(t,e,n,r){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,r||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function s(t,e){var n=Math.max(t.top,e.top),r=Math.min(t.bottom,e.bottom),o=Math.max(t.left,e.left),i=Math.min(t.right,e.right),a=i-o,c=r-n;return a>=0&&c>=0&&{top:n,bottom:r,left:o,right:i,width:a,height:c}}function u(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):l()}function l(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function f(t,e){for(var n=e;n;){if(n==t)return!0;n=d(n)}return!1}function d(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e}if("IntersectionObserver"in t&&"IntersectionObserverEntry"in t&&"intersectionRatio"in t.IntersectionObserverEntry.prototype)return void("isIntersecting"in t.IntersectionObserverEntry.prototype||Object.defineProperty(t.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}}));var p=[];r.prototype.THROTTLE_TIMEOUT=100,r.prototype.POLL_INTERVAL=null,r.prototype.USE_MUTATION_OBSERVER=!0,r.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},r.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},r.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},r.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},r.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]})},r.prototype._parseRootMargin=function(t){var e=t||"0px",n=e.split(/\s+/).map(function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});return n[1]=n[1]||n[0],n[2]=n[2]||n[0],n[3]=n[3]||n[1],n},r.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(a(t,"resize",this._checkForIntersections,!0),a(e,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in t&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},r.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,c(t,"resize",this._checkForIntersections,!0),c(e,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},r.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),e=t?this._getRootRect():l();this._observationTargets.forEach(function(r){var i=r.element,a=u(i),c=this._rootContainsTarget(i),s=r.entry,l=t&&c&&this._computeTargetAndRootIntersection(i,e),f=r.entry=new n({time:o(),target:i,boundingClientRect:a,rootBounds:e,intersectionRect:l});s?t&&c?this._hasCrossedThreshold(s,f)&&this._queuedEntries.push(f):s&&s.isIntersecting&&this._queuedEntries.push(f):this._queuedEntries.push(f)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},r.prototype._computeTargetAndRootIntersection=function(n,r){var o=this;if("none"!=t.getComputedStyle(n).display){for(var i=u(n),a=i,c=d(n),l=!1;!l;){var f=null,p=1==c.nodeType?t.getComputedStyle(c):{};if("none"==p.display)return;if(c==o.root||c==e?(l=!0,f=r):c!=e.body&&c!=e.documentElement&&"visible"!=p.overflow&&(f=u(c)),f&&!(a=s(f,a)))break;c=d(c)}return a}},r.prototype._getRootRect=function(){var t;if(this.root)t=u(this.root);else{var n=e.documentElement,r=e.body;t={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(t)},r.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100}),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},r.prototype._hasCrossedThreshold=function(t,e){var n=this,r=t&&t.isIntersecting?t.intersectionRatio||0:-1,o=e.isIntersecting?e.intersectionRatio||0:-1;if(r!==o)for(var i=0;i<this.thresholds.length;i++){var a=n.thresholds[i];if(a==r||a==o||a<r!=a<o)return!0}},r.prototype._rootIsInDom=function(){return!this.root||f(e,this.root)},r.prototype._rootContainsTarget=function(t){return f(this.root||e,t)},r.prototype._registerInstance=function(){p.indexOf(this)<0&&p.push(this)},r.prototype._unregisterInstance=function(){var t=p.indexOf(this);-1!=t&&p.splice(t,1)},t.IntersectionObserver=r,t.IntersectionObserverEntry=n}(window,document),r})},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(){E=j.node().offsetWidth-L.left-L.right,O=w.length*(z+F),H=d3.select(".scroll").node().offsetWidth<W}function o(){N.range([0,E]),A=N.bandwidth()}function i(t){var e=d3.select(this),n=d3.max(t.values,function(t){return t.raw}),r=d3.scaleLinear().domain([0,n]).range([0,z]);e.selectAll("rect").at("transform",function(t){return"translate("+N(t.minute)+",0)"}).at("width",A).at("height",function(t){return r(t.raw)}).at("y",function(t){return z-r(t.raw)})}function a(){P.at("transform",function(t,e){return"translate(0, "+(z+F)*e+")"}),P.each(i)}function c(){var t=d3.axisBottom(N).tickFormat(function(t){return t%30==0?0!==t||H?t+" min":"Start of Speech":""}).tickSizeOuter(0),e=O,n=M.select(".axis--x");n.call(t).at("transform","translate(0, "+e+")"),H?n.selectAll("text").at("text-anchor","start"):n.select("text").at("text-anchor","start")}function s(){M.select(".g-interaction .overlay").at({width:E,height:O})}function u(){r(),o();var t=L.left+L.right,e=L.top+L.bottom;M.at({width:E+t,height:O+e}),c(),a(),s()}function l(){var t=d3.range(k[0].values.length);N.domain(t)}function f(){T.classed("is-visible",!1),M.select(".strip").classed("is-visible",!1)}function d(){var t=d3.mouse(this),e=b(t,2),n=e[0],r=e[1],o=n+L.left,i=Math.floor(n/A);T.select("p").text("Click to see text at minute "+i),T.st({left:o,top:r}).classed("is-visible",!0);var a=i*A;M.select(".strip").at({width:A,height:O,x:a}).classed("is-visible",!0)}function p(t){return function(){var e=window.pageYOffset||document.documentElement.scrollTop,n=d3.interpolateNumber(e,e+t);return function(t){return window.scrollTo(0,n(t))}}}function h(){var t=d3.select(this),e=t.node().getBoundingClientRect(),n=e.top;d3.transition().duration(C).ease(B).tween("scroll",p(n))}function v(){var t=d3.mouse(this),e=b(t,2),n=e[0],r=(e[1],L.left,Math.floor(n/A)),o='[data-time="'+r+'"]';R.select(o).each(h)}function g(){var t=M.append("g").at("transform","translate("+L.left+", "+L.right+")");t.append("g.g-axis").append("g.axis.axis--x");var e=t.append("g.g-viz"),n=k.filter(function(t){return w.includes(t.key)});P=e.selectAll(".entity").data(n,function(t){return t.key});var r=P.enter().append("g.entity");if(r.append("text.label").text(function(t){return t.display}).at("text-anchor","end").at("y",z).at("x",-S/2),r.append("g.g-minute").selectAll("rect").data(function(t){return t.values}).enter().append("rect").at({x:0,y:0,width:0,height:0}),P=r.merge(P),P.each(function(t,e,n){d3.select(n[e]).selectAll("rect").st("fill",x.default.categorical[e])}),!H){var o=t.append("g.g-interaction");o.append("rect.strip").at({x:0,y:0,width:0,height:0}),o.append("rect.overlay").at({x:0,y:0}).on("mouseout",f).on("mousemove",d).on("click",v)}}function m(t){k=t.nested,l(),g(),u()}function y(){r(),o()}Object.defineProperty(e,"__esModule",{value:!0});var b=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=n(0),x=function(t){return t&&t.__esModule?t:{default:t}}(_),w=["/m/07s_c","/m/01_942","/m/01tf_6","/m/09g7pqs","/m/05b7q"],E=0,O=0,A=0,k=[],j=d3.select(".graphic__overview"),I=j.select(".chart"),M=I.select("svg"),T=I.select(".tooltip"),R=d3.select(".transcript"),P=null,S=12,C=1e3,B=d3.easeCubicOut,L={top:25,bottom:50,left:100,right:25},z=2*S,F=S,W=800,H=!1,N=d3.scaleBand();e.default={init:y,setup:m,resize:u}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=new Date(2018,0,30,21,+t+11);return d3.timeFormat("%I:%M")(e)}function i(){var t=j.select(".key").node().offsetHeight,e=j.node().offsetWidth,n=j.node().offsetHeight;W=d3.select(".scroll").node().offsetWidth<F,W?(z.top=64,z.bottom=25,z.left=110,z.right=25):(z.top=40,z.bottom=50,z.left=75,z.right=75),D=e-z.left-z.right,U=n-z.top-z.bottom-t}function a(){var t=[0,D],e=[U,0],n=W?e:t;$.order.range(n);var r=W?t:e;$.percent.range(r),$.raw.range(r),$.sum.range([S,W?18:C]),H=$.order.step(),N=$.order.bandwidth(),q=H-N}function c(){M.select("g").at("transform","translate("+z.left+", "+z.top+")");var t=function(t){return V?t.values[V].percent:0},e=function(t){return V?t.values[V].raw:0},n=function(t){return d3.sum(t.filter(function(t,e){return e<=V}).map(function(t){return t.raw}))};Y.length&&R.classed("is-selected",function(t){return Y.includes(t.key)}).filter(function(t){return Y.includes(t.key)}).raise(),R.transition().duration(B).ease(L).at("transform",function(n,r){var o=t(n),i=e(n),a="raw"===w?i:o,c=$.order(r)+N/2,s=$[w](a);return"translate("+(W?s:c)+", "+(W?c:s)+")"}),R.selectAll("text").at("text-anchor",W?"end":"middle").st("font-size",function(t){return $.sum(n(t.values))}),M.select(".g-space").selectAll("rect").at({x:-q,y:0,height:U+2,width:q}).at("transform",function(t,e){return"translate("+H*e+", 0)"})}function s(){var t=M.select(".axis--order"),e=M.select(".axis--search"),n=U+P;t.select(".axis-val--start").text("↑ More popular").at("transform","translate("+(-z.left+P)+", "+2.25*-P+")"),t.select(".axis-val--end").text("↓ Less popular").at("transform","translate("+(-z.left+P)+", "+n+")"),e.select(".axis-label").at("transform","translate("+D+", "+2*-P+")").at("text-anchor","end");var r="raw"===w?".0f":".0%",o=d3.axisTop($[w]).tickSize(-U).tickPadding(P).tickFormat(d3.format(r)).ticks(5);e.select(".axis-marks").remove(),e.append("g.axis-marks").call(o).at("transform","translate(0, 0)"),e.select(".prefix").at({x:0,y:2*-P}),e.select(".time").at({x:0,y:2*-P,dy:"1.2em"})}function u(){var t=U+3*P;M.select(".axis--order").at("transform","translate(0, "+t+")"),M.select(".axis-val--start").at("transform","translate(0, 0)").at("text-anchor","start").text("← Less popular"),M.select(".axis-val--end").at("transform","translate("+D+", 0)").at("text-anchor","end").text("More popular →");var e=M.select(".axis--search");e.select(".axis-label").at("transform","translate(0, "+-P/2+")").at("text-anchor","middle");var n="raw"===w?".0f":".0%",r=d3.axisLeft($[w]).tickSize(-D).tickPadding(P).tickFormat(d3.format(n));e.select(".axis-marks").remove(),e.append("g.axis-marks").call(r).at("transform","translate(0, 0)"),M.select(".axis-label--order").at("transform","translate("+D/2+", 0)"),e.select(".prefix").at({x:0,y:2*-P}),e.select(".time").at({x:0,y:2*-P,dy:"1.2em"})}function l(){W?s():u(),M.select(".axis-label--search .time").text("at "+o(V)+" pm EST")}function f(t){var e=t.minute,n=void 0===e?V:e,r=t.marks,o=void 0===r?[]:r;V=Math.min(n,80),Y=o,R&&(l(),c())}function d(){i();var t=z.left+z.right,e=z.top+z.bottom;M.at({width:D+t,height:U+e}),a(),f({})}function p(){var t=d3.range(O.length);$.order.domain(t);var e=d3.max(E,function(t){return t.percent});$.percent.domain([0,e]);var n=d3.max(E,function(t){return t.raw});$.raw.domain([0,n]);var r=d3.max(O,function(t){return t.sum});$.sum.domain([0,r])}function h(){var t=M.append("g"),e=t.append("g.g-axis");t.append("g.g-space").selectAll("rect").data(O).enter().append("rect");var n=e.append("g.axis.axis--order"),r=e.append("g.axis.axis--search");r.append("g.axis-marks"),n.append("text.axis-val.axis-val--start"),n.append("text.axis-val.axis-val--end");var o=r.append("text.axis-label.axis-label--search");o.append("tspan.prefix").text("Search Interest"),o.append("tspan.time").text("at 9:00 PM EST");var i=t.append("g.g-viz");R=i.selectAll(".entity").data(O,function(t){return t.key});var a=R.enter().append("g.entity");a.at("transform",function(t,e){return"translate("+$.order(e)+", "+$[w](0)+")"}),a.append("circle").at({cx:0,cy:0,r:0}),a.append("text.bg").at("y",P/4).at("aligment-baseline","middle").text(function(t){return t.display}),a.append("text.fg").st("fill",function(t){return x.default.categorical[k.indexOf(t.category)]}).at("y",P/4).at("aligment-baseline","middle").text(function(t){return t.display}),R=a.merge(R),t.append("g.g-key"),t.append("g.g-toggle")}function v(){var t=Object.keys(A).map(function(t){return A[t].category});k=(0,b.default)(t),T.append("li").attr("class","key-label").text("Color = "),T.selectAll(".key-color").data(k).enter().append("li").attr("class","key-color").text(function(t){return t}).st("color",function(t,e){return x.default.categorical[e]}),T.append("li").attr("class","key-font-label").text("Text Size = "),T.selectAll(".key-font").data(["cumulative searches during speech","Fewer","More","Most"]).enter().append("li").attr("class","key-font").text(function(t){return t}).style("color",function(t,e){return 5==e?"#aaaaaa":0==e?null:"#bc5252"}).style("font-size",function(t,e){return 1==e||5==e?"10px":0==e?"10px":1==e?"10px":2==e?"12px":3==e?"14px":null})}function g(t){O=t.nested,E=t.search,A=t.dict,v(),p(),h(),d()}function m(){i()}Object.defineProperty(e,"__esModule",{value:!0});var y=n(2),b=r(y),_=n(0),x=r(_),w="percent",E=null,O=null,A=null,k=null,j=d3.select(".graphic__speech"),I=j.select(".chart"),M=I.select("svg"),T=j.select(".key"),R=null,P=12,S=12,C=36,B=1e3,L=d3.easeCubicOut,z={},F=800,W=!1,H=0,N=0,q=0,$={order:d3.scaleBand().paddingInner(.2),raw:d3.scaleLinear().clamp(!0),percent:d3.scaleLinear().clamp(!0),sum:d3.scaleLinear().clamp(!0)},D=0,U=0,V=0,Y=[];e.default={init:m,setup:g,resize:d,update:f}}]);